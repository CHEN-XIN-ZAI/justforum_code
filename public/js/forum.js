!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){t.exports=function(){"use strict";var t="@@InfiniteScroll",e=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},i=document.defaultView.getComputedStyle,n=function(t){return t===window?e(window):t.getBoundingClientRect().top+e(window)},o=function(t){for(var e=t.parentNode;e;){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},r=function(){if(!this.binded){this.binded=!0;var t,e,n,o,r,l,a,c,u=this,d=u.el,h=d.getAttribute("infinite-scroll-throttle-delay"),f=200;h&&(f=Number(u.vm[h]||h),(isNaN(f)||f<0)&&(f=200)),u.throttleDelay=f,u.scrollEventTarget=function(t){for(var e=t;e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType;){var n=i(e).overflowY;if("scroll"===n||"auto"===n)return e;e=e.parentNode}return window}(d),u.scrollListener=(t=s.bind(u),e=u.throttleDelay,c=function(){t.apply(l,a),o=n},function(){if(l=this,a=arguments,n=Date.now(),r&&(clearTimeout(r),r=null),o){var t=e-(n-o);t<0?c():r=setTimeout((function(){c()}),t)}else c()}),u.scrollEventTarget.addEventListener("scroll",u.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){u.scrollEventTarget.removeEventListener("scroll",u.scrollListener)}));var b=d.getAttribute("infinite-scroll-disabled"),p=!1;b&&(this.vm.$watch(b,(function(t){u.disabled=t,!t&&u.immediateCheck&&s.call(u)})),p=Boolean(u.vm[b])),u.disabled=p;var y=d.getAttribute("infinite-scroll-distance"),m=0;y&&(m=Number(u.vm[y]||y),isNaN(m)&&(m=0)),u.distance=m;var v=d.getAttribute("infinite-scroll-immediate-check"),g=!0;v&&(g=Boolean(u.vm[v])),u.immediateCheck=g,g&&s.call(u);var w=d.getAttribute("infinite-scroll-listen-for-event");w&&u.vm.$on(w,(function(){s.call(u)}))}},s=function(t){var i=this.scrollEventTarget,o=this.el,r=this.distance;if(!0===t||!this.disabled){var s=e(i),l=s+function(t){return t===window?document.documentElement.clientHeight:t.clientHeight}(i);(i===o?i.scrollHeight-l<=r:l+r>=n(o)-n(i)+o.offsetHeight+s)&&this.expression&&this.expression()}},l={bind:function(e,i,n){e[t]={el:e,vm:n.context,expression:i.value};var s=arguments;e[t].vm.$on("hook:mounted",(function(){e[t].vm.$nextTick((function(){o(e)&&r.call(e[t],s),e[t].bindTryCount=0,function i(){e[t].bindTryCount>10||(e[t].bindTryCount++,o(e)?r.call(e[t],s):setTimeout(i,50))}()}))}))},unbind:function(e){e&&e[t]&&e[t].scrollEventTarget&&e[t].scrollEventTarget.removeEventListener("scroll",e[t].scrollListener)}},a=function(t){t.directive("InfiniteScroll",l)};return window.Vue&&(window.infiniteScroll=l,Vue.use(a)),l.install=a,l}()},function(t,e,i){"use strict";i.r(e);i(0);$(document).ready((function(){new Vue({el:"#article_list",directives:{infiniteScroll:infiniteScroll},data:{data:[],busy:!1,step1:!1,article_show:[],count:0,between:3,ending:!1,type:$("#article_list").data("type"),tag:"最新文章",start:200,selected:"new",select_busy:!1},watch:{selected:function(){this.select_busy?this.select_busy=!1:this.data.length>1&&("new"==this.selected?this.new_article():"hot"==this.selected&&this.hot_article())}},methods:{loadMore:function(){this.busy=!0,this.start=10;let t=this;setTimeout(()=>{if(t.step1)if("nodata"!==this.data){for(let t=this.count;t<this.count+this.between;t++)if(this.article_show.push(this.data[t]),this.data.length-1==t){this.ending=!0;break}this.busy=!1,this.ending?this.busy=!0:this.count+=this.between}else this.ending=!0,this.busy=!0;else $.ajax({type:"POST",url:"/forum/article",data:{_csrf:$("#article_list").data("key"),type:this.type,tag:this.tag},dataType:"json",success:function(e){if("nodata"!==e.data){let i=e.data.article,n=Object.keys(i);for(let e=0;e<n.length;e++)t.data.push(i[n[e]]);t.step1=!0,"最多人觀看"==e.type?t.hot_article():t.new_article()}else t.step1=!0,t.busy=!1,t.data="nodata",t.loadMore()},error:function(e){t.step1=!0,t.busy=!1,t.data="nodata"}})},100)},todate(t){var e=new Date(parseInt(t));return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()},get_type_tag(t,e){if(this.type!==t||this.tag!==e){this.type=t,this.tag=e,this.article_show=[],this.ending=!1,this.step1=!1,this.busy=!1,this.data=[];let i=$("#article_views").offset().top;$("html,body").animate({scrollTop:i},500),this.loadMore()}},new_article(){"new"!==this.selected&&(this.select_busy=!0,this.selected="new"),this.article_show=[],this.data=this.data.sort((function(t,e){return t.editor_time<e.editor_time?1:-1})),this.count=0,this.ending=!1,this.busy=!1,this.loadMore()},hot_article(){"hot"!==this.selected&&(this.select_busy=!0,this.selected="hot"),this.article_show=[],this.data=this.data.sort((function(t,e){return t.watch<e.watch?1:-1})),this.count=0,this.ending=!1,this.busy=!1,this.loadMore()}}})}))}]);