!function(e){var t={};function n(i){if(t[i])return t[i].exports;var l=t[i]={i:i,l:!1,exports:{}};return e[i].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(i,l,function(t){return e[t]}.bind(null,l));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),$(document).ready((function(){if($("#menu-show").click((function(e){e.preventDefault(),$("#menu-show span").toggleClass("active"),$(".left-close").stop().fadeToggle(),$(".search-close").stop().fadeOut(),$(".left-menu").toggleClass("show"),$(".contents").toggleClass("blur-left"),$(".contents").removeClass("blur-search"),$(".search-min").removeClass("show")})),$("#search-min").click((function(e){e.preventDefault(),$(".search-close").stop().fadeToggle(),$(".left-close").stop().fadeOut(),$(".search-min").toggleClass("show"),$(".contents").toggleClass("blur-search"),$(".contents").removeClass("blur-left"),$(".left-menu").removeClass("show"),$("#menu-show span").removeClass("active")})),$(".left-close , .search-close").click((function(e){e.preventDefault(),$(".left-menu , .search-min").removeClass("show"),$(".left-close , .search-close").stop().fadeOut(),$("#menu-show span").removeClass("active"),$(".contents").removeClass("blur-left blur-search")})),-1!==$(".img-b").attr("class").indexOf("index")){let e=$(window).innerWidth()/2,t=$(window).innerHeight()/2;$(window).resize((function(){e=$(window).innerWidth()/2,t=$(window).innerHeight()/2})),$(window).mousemove((function(n){let i=0,l=0;i=n.clientX>e?(e-n.clientX)/20:-(n.clientX-e)/20,l=n.clientY>t?(t-n.clientY)/20:-(n.clientY-t)/20,$(".img-b").css("transform","translate("+i+"px,"+l+"px)")}))}let e=$("#nav_bar"),t=0,n=!0;if($(window).scroll((function(){"block"==e.css("display")&&($(this).scrollTop()>t?n&&(e.addClass("hide"),e.removeClass("bounce"),n=!1,$(".search-min,.left-menu").css("top","0")):n||(e.removeClass("hide"),e.addClass("bounce"),n=!0,$(".search-min,.left-menu").css("top","43px")),t=$(this).scrollTop())})),localStorage.getItem("article_log")){let e=JSON.parse(localStorage.getItem("article_log"));$(".article_log").text(""),e.length>10&&(e.length=10);for(let t=0;t<e.length;t+=2)$(".article_log").append(`<a class="d-inline-block text-truncate w-100" href="${e[t+1]}" title="${e[t]}">${e[t]}</a>`)}setTimeout((function(){$(".loading_animate").fadeOut(1e3),$("body").removeClass("overflow-hidden"),setTimeout((function(){$(".loading_animate").remove()}),900)}),300),$(window).scroll((function(){$(this).scrollTop()>50?$(".gotop").addClass("show"):$(".gotop").removeClass("show")})),$(".gotop").click((function(e){e.preventDefault(),$("html,body").animate({scrollTop:0},1e3),$(this).addClass("gomoon"),this.addEventListener("animationend",(function(){$(this).removeClass("gomoon")}))})),window.onbeforeunload=function(){"article"!==$("section").data("type")&&($("body").append('<div class="leave">\n                <div class="t"></div>\n                <div class="b"></div>\n                <div class="l"></div>\n                <div class="r"></div>\n                </div>'),setTimeout(()=>{$(".leave").addClass("open")},100))},$(".card-toggle .card-header").click((function(e){e.preventDefault(),$(this).find("i").toggleClass("open"),$(this).parent().find(".card-body").slideToggle()})),$('.chat .public input[name="user_info"]').val()||(localStorage.getItem("chat_nick")?($('.chat .public input[name="user_info"]').val(localStorage.getItem("chat_nick")),$('.chat .public input[name="user_info"]').val(),$(".chat .public #reset_nick").removeClass("d-none")):$(".chat .public .set_username").removeClass("d-none")),$(".chat .public .set_username button").click((function(e){e.preventDefault();let t=$(".chat .public .set_username input").val();t?($(".chat .public .set_username").addClass("d-none"),$('.chat .public input[name="user_info"]').val(t),$(".chat .public #reset_nick").removeClass("d-none"),localStorage.setItem("chat_nick",t)):alert("請輸入正確的暱稱")})),$(".chat .public #reset_nick").click((function(e){e.preventDefault();let t=localStorage.getItem("chat_nick");t&&$(".chat .public .set_username input").val(t),$(".chat .public .set_username").removeClass("d-none")}));let i=!0;$(".chat .card .card-header").click((function(e){if(e.preventDefault(),$(".chat .card .card-body").slideToggle(300),$(this).find(".default").toggleClass("focus"),$(this).find(".change").toggleClass("d-none"),i){i=!1;let e=document.getElementById("public_msg");e.scrollTop=e.scrollHeight-e.clientHeight}})),$(".chat .card .card-header .change").click((function(e){e.preventDefault(),e.stopPropagation(),$(this).siblings("span").toggleClass("focus default"),$(".chat .card .card-body > .d-flex > div").toggleClass("show")})),$('.chat .public input[type="search"]').on("keyup",(function(){$(this).val()?$(this).siblings("button").removeAttr("disabled"):$(this).siblings("button").attr("disabled","")}));const l="0"==$('.chat .public input[name="user_info"]').data("auth")?$(".chat").data("ip"):{ip:$(".chat").data("ip"),name:$('.chat .public input[name="user_info"]').val(),img:$('.chat .public input[name="user_pic"]').val(),auth:"1"};"object"==typeof l?socket.emit("online",l):socket.emit("online",{ip:l,auth:""});let s=!0;function a(e){if(s){if(s=!1,setTimeout(()=>{s=!0},3e3),"object"==typeof l)return l.name&&l.img?(l.msg=e,l):"0";let t=$('.chat .public input[name="user_info"]').val(),n=$('.chat .public input[name="user_pic"]').val();return t&&n?{ip:l,name:t,img:n,msg:e,auth:""}:"0"}return $(".sys_msg").show().fadeOut(1e3),""}$(".public form").submit((function(e){e.preventDefault();let t=$(this).find('input[name="msg"]').val()||"";if(t){let e=a(t);e&&($(this).find('input[name="msg"]').val(""),socket.emit("send",e))}})),$(".chat .public #send_msg").click((function(e){e.preventDefault();let t=$(this).siblings('input[name="msg"]').val()||"";if(t){$(this).attr("disabled","");let e=a(t);e&&($(this).find('input[name="msg"]').val(""),socket.emit("send",e))}})),socket.on("getmsg",(function(e){!function(e,t){let n=document.getElementById(e),i=!1;n.scrollTop+10>=n.scrollHeight-n.clientHeight&&(i=!0);let s="",a="";if((s="object"==typeof l?l.ip:l)==t.ip){let e=document.createElement("div");e.className="media my-3",e.innerHTML=`<div class="user_msg media-body text-right">\n                                    <pre class="text-break mb-0"></pre>\n                                    <small class="text-secondary">${t.date}</small>\n                                </div>`,$(e).find("pre").text(t.msg),a=e}else{let e=document.createElement("div");e.className="media my-3",e.innerHTML=`<div class="img_box">\n                                    <img width="30" height="30" src="${t.img}" alt="" class="d-flex mr-3" style="border-radius: 50%;">\n                                    <div class="ip_box alert alert-warning m-0 p-0">\n                                        ${t.auth?"ip:會員保密。":"ip:"+t.ip}\n                                    </div>\n                                </div>\n                                <div class="user_msg media-body">\n                                    <div class="text-primary name_"></div>\n                                    <pre class="text-break mb-0"></pre>\n                                    <small class="text-secondary">${t.date}</small>\n                                </div>`,$(e).find(".user_msg .name_").text(t.name),$(e).find("pre").text(t.msg),a=e}i?($(n).append(a),n.scrollTop=n.scrollHeight-n.clientHeight):$(n).append(a)}("public_msg",e)})),socket.on("online_test",(function(e){let t="",n="";"object"==typeof l?(t=l.ip,n="1"):t=l,socket.emit("online",{ip:t,auth:n})})),socket.on("online",(function(e){$(".online-person").text(e.all),$(".not-auth").text(e.not_auth)}))}))}]);