!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){t.exports=function(){"use strict";var t="@@InfiniteScroll",e=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},n=document.defaultView.getComputedStyle,i=function(t){return t===window?e(window):t.getBoundingClientRect().top+e(window)},r=function(t){for(var e=t.parentNode;e;){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},o=function(){if(!this.binded){this.binded=!0;var t,e,i,r,o,a,s,c,u=this,d=u.el,f=d.getAttribute("infinite-scroll-throttle-delay"),g=200;f&&(g=Number(u.vm[f]||f),(isNaN(g)||g<0)&&(g=200)),u.throttleDelay=g,u.scrollEventTarget=function(t){for(var e=t;e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType;){var i=n(e).overflowY;if("scroll"===i||"auto"===i)return e;e=e.parentNode}return window}(d),u.scrollListener=(t=l.bind(u),e=u.throttleDelay,c=function(){t.apply(a,s),r=i},function(){if(a=this,s=arguments,i=Date.now(),o&&(clearTimeout(o),o=null),r){var t=e-(i-r);t<0?c():o=setTimeout((function(){c()}),t)}else c()}),u.scrollEventTarget.addEventListener("scroll",u.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){u.scrollEventTarget.removeEventListener("scroll",u.scrollListener)}));var h=d.getAttribute("infinite-scroll-disabled"),p=!1;h&&(this.vm.$watch(h,(function(t){u.disabled=t,!t&&u.immediateCheck&&l.call(u)})),p=Boolean(u.vm[h])),u.disabled=p;var m=d.getAttribute("infinite-scroll-distance"),v=0;m&&(v=Number(u.vm[m]||m),isNaN(v)&&(v=0)),u.distance=v;var b=d.getAttribute("infinite-scroll-immediate-check"),y=!0;b&&(y=Boolean(u.vm[b])),u.immediateCheck=y,y&&l.call(u);var w=d.getAttribute("infinite-scroll-listen-for-event");w&&u.vm.$on(w,(function(){l.call(u)}))}},l=function(t){var n=this.scrollEventTarget,r=this.el,o=this.distance;if(!0===t||!this.disabled){var l=e(n),a=l+function(t){return t===window?document.documentElement.clientHeight:t.clientHeight}(n);(n===r?n.scrollHeight-a<=o:a+o>=i(r)-i(n)+r.offsetHeight+l)&&this.expression&&this.expression()}},a={bind:function(e,n,i){e[t]={el:e,vm:i.context,expression:n.value};var l=arguments;e[t].vm.$on("hook:mounted",(function(){e[t].vm.$nextTick((function(){r(e)&&o.call(e[t],l),e[t].bindTryCount=0,function n(){e[t].bindTryCount>10||(e[t].bindTryCount++,r(e)?o.call(e[t],l):setTimeout(n,50))}()}))}))},unbind:function(e){e&&e[t]&&e[t].scrollEventTarget&&e[t].scrollEventTarget.removeEventListener("scroll",e[t].scrollListener)}},s=function(t){t.directive("InfiniteScroll",a)};return window.Vue&&(window.infiniteScroll=a,Vue.use(s)),a.install=s,a}()},function(t,e,n){"use strict";n.r(e);n(0);$(document).ready((function(){let t=$("#user_res").data("id"),e=$("#user_res").data("title").toString();if(t&&e)if(localStorage.getItem("article_log")){let n=JSON.parse(localStorage.getItem("article_log")),i=n.indexOf(e);if(-1!==i){let t=n[i],e=n[i+1];n.splice(i+1,1),n.splice(i,1),n.splice(0,0,e),n.splice(0,0,t)}else n.splice(0,0,"/article?id="+t),n.splice(0,0,e);localStorage.setItem("article_log",JSON.stringify(n))}else{let n=[];n.push(e),n.push("/article?id="+t),localStorage.setItem("article_log",JSON.stringify(n))}new Vue({el:"#user_res",directives:{infiniteScroll:infiniteScroll},data:{data:[],busy:!1,step1:!1,article_show:[],count:0,between:3,ending:!1,start:500,num:"0 則"},watch:{},methods:{loadMore:function(){this.busy=!0,this.start=10;let t=this;setTimeout(()=>{if(t.step1)if("nodata"!==this.data){for(let t=this.count;t<this.count+this.between;t++)if(this.data[t].msg.split("\n").length>=3&&(this.data[t].pre=!0),this.article_show.push(this.data[t]),this.data.length-1==t){this.ending=!0;break}this.busy=!1,this.ending?this.busy=!0:this.count+=this.between}else this.ending=!0,this.busy=!0;else $.ajax({type:"POST",url:"/article/msg_get",data:{_csrf:$("#user_res").data("key"),id:$("#user_res").data("id")},dataType:"json",success:function(e){"nodata"!==e.data?(t.data=e.data,t.step1=!0,t.busy=!1,t.num=e.data.length+" 則"):(t.step1=!0,t.busy=!1,t.data="nodata",t.loadMore())},error:function(e){t.step1=!0,t.busy=!1,t.data="nodata"}})},100)},todate(t){var e=new Date(parseInt(t));return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()},show(t){$(t.target).siblings("pre").toggleClass("open"),-1==$(t.target).siblings("pre").attr("class").indexOf("open")?$(t.target).text("顯示完整內容"):$(t.target).text("隱藏部分內容")},before_time(t){let e=(new Date).getTime()-parseInt(t);return(e=Math.floor(e/1e3))<60?e.toString()+"秒之前":e/60<60?Math.floor(e/60).toString()+"分鐘之前":e/60/60<24?Math.floor(e/60/60).toString()+"小時之前":e/60/60/24<31?Math.floor(e/60/60/24).toString()+"天之前":e/60/60/24/365<1?Math.floor(e/60/60/24/30).toString()+"月之前":e/60/60/24/365>=1?Math.floor(e/60/60/24/365).toString()+"年之前":void 0}}})}))}]);